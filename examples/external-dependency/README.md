# Networking Vision Example - External Dependency

## Introduction

This example shows how to use the [OCI Landing Zone Networking module](https://github.com/oracle-quickstart/terraform-oci-cis-landing-zone-networking) with external dependencies, which are resources managed by another Terraform configuration that this configuration depends on. It does so by injecting one subnet and one security list in the VCN managed by the [vision example](https://github.com/oracle-quickstart/terraform-oci-cis-landing-zone-networking/blob/main/examples/vision/README.md)

The example depends on two *.json* files in the [./dependencies](./dependencies/) folder:
- *vision-compartments.json*: with references to compartments OCIDs. This example requires a valid OCID referred by "NETWORK-CMP" key. This file is typically generated by a client of the IAM Compartments module, like the [Compartments vision example](https://github.com/oracle-quickstart/terraform-oci-cis-landing-zone-iam/tree/main/compartments/examples/vision). 
- *vision-network.json*: with references to VCN OCIDs. This example requires a valid OCI referred by "VISION-VCN" key. This file is typically generated by a client of the Networking module, like the [Networking vision example](https://github.com/oracle-quickstart/terraform-oci-cis-landing-zone-networking/blob/main/examples/vision).

**Note**: for quick testing, you can simply paste valid OCIDs in the two files, although this defeats the purpose of automated external dependencies.

See [input.auto.tfvars.template](./input.auto.tfvars.template) for the network configuration.

See [module's README.md](https://github.com/oracle-quickstart/terraform-oci-cis-landing-zone-networking/blob/main/README.md) for overall attributes usage.


## Using this example

1. Rename *input.auto.tfvars.template* to *\<project-name\>.auto.tfvars*, where *\<project-name\>* is any name of your choice.

2. Within *\<project-name\>.auto.tfvars*, provide tenancy connectivity information and adjust the input variables, by making the appropriate substitutions:
   - Make sure *./dependencies/vision-compartments.json* has the *NETWORK-CMP* key defined with the id attribute set with a valid compartment OCID.
   - Make sure *./dependencies/vision-network.json* has the *VISION-VCN* key defined with the id attribute set with a valid VCN OCID. 
   
3. In this folder, run the typical Terraform workflow:
```
terraform init
terraform plan -out plan.out
terraform apply plan.out
```